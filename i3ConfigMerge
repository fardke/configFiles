#!/bin/bash

i3config="$HOME/.i3/config"
repoConfigFiles="$HOME/configFiles/i3"

print_help()
{
    echo -e "Usage: $0 [action]"
    echo -e "\t -l to use config.laptop"
    echo -e "\t -f to use config.fix"
    exit 1
}

write_config_file()
{
    if [[ -f $i3config ]] ; then
        echo "$i3config is saved to ~/.i3/config.old"
        cp $i3config $HOME/.i3/config.old
    fi

    echo -e "# Do not edit this file." > $i3config
    echo -e "# Use ~/configFiles/i3/config.base or" >> $i3config
    echo -e "# ~/configFiles/i3/config.laptop or" >> $i3config
    echo -e "#Â ~/configFiles/i3/config.fix." >> $i3config

    cat $repoConfigFiles/config.base >> $i3config
    cat $1 >> $i3config
}

if [[ ($# -ne 1) ]]; then
    print_help
fi

case "$1" in
    "-l")
        write_config_file $repoConfigFiles/config.laptop
        ;;
    "-f")
        write_config_file $repoConfigFiles/config.fix
        ;;
    "*")
        print_help
        ;;
esac

exit 0
